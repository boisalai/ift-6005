2025-03-07 09:56:57,923 - INFO - Base de données Neo4j effacée avec succès
2025-03-07 09:56:58,051 - INFO - Chargement du fichier ../../data/openfoodfacts-canadian-products.jsonl
2025-03-07 09:57:33,680 - INFO - Fichier chargé: 97439 produits trouvés
2025-03-07 09:57:35,639 - INFO - Limitation à 1000 produits...
2025-03-07 09:57:35,780 - INFO - Contrainte créée: CREATE CONSTRAINT product_id IF NOT EXISTS FOR (p:Product) REQUIRE p.id IS UNIQUE
2025-03-07 09:57:35,879 - INFO - Contrainte créée: CREATE CONSTRAINT brand_name IF NOT EXISTS FOR (b:Brand) REQUIRE b.name IS UNIQUE
2025-03-07 09:57:35,961 - INFO - Contrainte créée: CREATE CONSTRAINT ingredient_name IF NOT EXISTS FOR (i:Ingredient) REQUIRE i.name IS UNIQUE
2025-03-07 09:57:36,057 - INFO - Contrainte créée: CREATE CONSTRAINT category_name IF NOT EXISTS FOR (c:Category) REQUIRE c.name IS UNIQUE
2025-03-07 09:57:36,146 - INFO - Contrainte créée: CREATE CONSTRAINT country_name IF NOT EXISTS FOR (c:Country) REQUIRE c.name IS UNIQUE
2025-03-07 09:57:36,238 - INFO - Contrainte créée: CREATE CONSTRAINT allergen_name IF NOT EXISTS FOR (a:Allergen) REQUIRE a.name IS UNIQUE
2025-03-07 09:57:36,325 - INFO - Contrainte créée: CREATE CONSTRAINT nutrient_name IF NOT EXISTS FOR (n:Nutrient) REQUIRE n.name IS UNIQUE
2025-03-07 09:57:36,405 - INFO - Contrainte créée: CREATE CONSTRAINT label_name IF NOT EXISTS FOR (l:Label) REQUIRE l.name IS UNIQUE
2025-03-07 09:57:36,411 - INFO - Prétraitement des produits...
2025-03-07 09:57:36,411 - INFO - DIAGNOSTIC - Examen des 3 premiers produits sur 1000 total:
2025-03-07 09:57:36,411 - INFO -   Produit #1:
2025-03-07 09:57:36,414 - INFO -     ID: 0008577002786
2025-03-07 09:57:36,414 - INFO -     Nom: Organic Vermont Maple Syrup Grade A Dark Color Robust Taste
2025-03-07 09:57:36,414 - INFO -     Marques: usda organic Butternut Mountain Farm,Butternut Mountain Farm
2025-03-07 09:57:36,414 - INFO -     Catégories: Sweeteners,Syrups,Simple syrups,Maple syrups
2025-03-07 09:57:36,414 - INFO -     A des ingrédients: Oui
2025-03-07 09:57:36,414 - INFO -     A des nutriments: Oui
2025-03-07 09:57:36,414 - INFO -   Produit #2:
2025-03-07 09:57:36,414 - INFO -     ID: 0011110020758
2025-03-07 09:57:36,415 - INFO -     Nom: Imitation vanilla flavor
2025-03-07 09:57:36,415 - INFO -     Marques: Kroger
2025-03-07 09:57:36,415 - INFO -     Catégories: MANQUANT
2025-03-07 09:57:36,415 - INFO -     A des ingrédients: Oui
2025-03-07 09:57:36,415 - INFO -     A des nutriments: Oui
2025-03-07 09:57:36,415 - INFO -   Produit #3:
2025-03-07 09:57:36,415 - INFO -     ID: 0011110416469
2025-03-07 09:57:36,415 - INFO -     Nom: 1% low-fat milk
2025-03-07 09:57:36,415 - INFO -     Marques: Kroger
2025-03-07 09:57:36,415 - INFO -     Catégories: MANQUANT
2025-03-07 09:57:36,415 - INFO -     A des ingrédients: Oui
2025-03-07 09:57:36,416 - INFO -     A des nutriments: Oui
2025-03-07 09:57:36,466 - INFO - Prétraitement - Total: 1000, Valides: 1000, Ignorés: 0
2025-03-07 09:57:36,467 - INFO -   Raison d'exclusion: default_name_used - 32 produits
2025-03-07 09:57:36,467 - INFO - Création des mappings de normalisation pour toutes les entités...
2025-03-07 09:57:36,494 - INFO - Use pytorch device_name: mps
2025-03-07 09:57:36,494 - INFO - Load pretrained SentenceTransformer: paraphrase-multilingual-mpnet-base-v2
2025-03-07 09:57:44,218 - INFO - Use pytorch device_name: mps
2025-03-07 09:57:44,218 - INFO - Load pretrained SentenceTransformer: paraphrase-multilingual-mpnet-base-v2
2025-03-07 09:57:48,840 - INFO - Use pytorch device_name: mps
2025-03-07 09:57:48,840 - INFO - Load pretrained SentenceTransformer: paraphrase-multilingual-mpnet-base-v2
2025-03-07 09:57:52,267 - INFO - Use pytorch device_name: mps
2025-03-07 09:57:52,268 - INFO - Load pretrained SentenceTransformer: paraphrase-multilingual-mpnet-base-v2
2025-03-07 09:57:54,582 - INFO - Use pytorch device_name: mps
2025-03-07 09:57:54,582 - INFO - Load pretrained SentenceTransformer: paraphrase-multilingual-mpnet-base-v2
2025-03-07 09:57:59,865 - INFO - Use pytorch device_name: mps
2025-03-07 09:57:59,866 - INFO - Load pretrained SentenceTransformer: paraphrase-multilingual-mpnet-base-v2
2025-03-07 09:58:03,192 - INFO - Prétraitement terminé: 1000 produits valides
2025-03-07 09:58:03,192 - INFO - Prétraitement terminé: 1000 produits valides
2025-03-07 09:58:03,193 - INFO - Création de 8 nœuds de type Nutrient
2025-03-07 09:58:03,655 - INFO - Progrès Nutrient: 8/8
2025-03-07 09:58:03,656 - INFO - Création des nœuds Nutrient terminée en 0.46 secondes
2025-03-07 09:58:03,656 - INFO - Création de 377 nœuds de type Brand
2025-03-07 09:58:03,934 - INFO - Progrès Brand: 377/377
2025-03-07 09:58:03,934 - INFO - Création des nœuds Brand terminée en 0.28 secondes
2025-03-07 09:58:03,934 - INFO - Création de 580 nœuds de type Category
2025-03-07 09:58:04,162 - INFO - Progrès Category: 580/580
2025-03-07 09:58:04,163 - INFO - Création des nœuds Category terminée en 0.23 secondes
2025-03-07 09:58:04,163 - INFO - Création de 46 nœuds de type Country
2025-03-07 09:58:04,299 - INFO - Progrès Country: 46/46
2025-03-07 09:58:04,300 - INFO - Création des nœuds Country terminée en 0.14 secondes
2025-03-07 09:58:04,300 - INFO - Création de 1815 nœuds de type Ingredient
2025-03-07 09:58:04,624 - INFO - Progrès Ingredient: 1000/1815
2025-03-07 09:58:04,904 - INFO - Progrès Ingredient: 1815/1815
2025-03-07 09:58:04,904 - INFO - Création des nœuds Ingredient terminée en 0.60 secondes
2025-03-07 09:58:04,904 - INFO - Création de 30 nœuds de type Allergen
2025-03-07 09:58:05,037 - INFO - Progrès Allergen: 30/30
2025-03-07 09:58:05,038 - INFO - Création des nœuds Allergen terminée en 0.13 secondes
2025-03-07 09:58:05,038 - INFO - Création de 215 nœuds de type Label
2025-03-07 09:58:05,145 - INFO - Progrès Label: 215/215
2025-03-07 09:58:05,145 - INFO - Création des nœuds Label terminée en 0.11 secondes
2025-03-07 09:58:05,145 - INFO - Création de 1000 nœuds de produits
2025-03-07 09:58:05,354 - INFO - Progrès produits: 500/1000
2025-03-07 09:58:05,502 - INFO - Progrès produits: 1000/1000
2025-03-07 09:58:05,503 - INFO - Création des nœuds de produits terminée en 0.36 secondes
2025-03-07 09:58:05,503 - INFO - Création des relations de type BELONGS_TO
2025-03-07 09:58:05,732 - INFO - Progrès relations BELONGS_TO: 500/1000
2025-03-07 09:58:05,854 - INFO - Progrès relations BELONGS_TO: 1000/1000
2025-03-07 09:58:05,854 - INFO - Création des relations BELONGS_TO terminée en 0.35 secondes
2025-03-07 09:58:05,854 - INFO - Création des relations de type CATEGORIZED_AS
2025-03-07 09:58:06,174 - INFO - Progrès relations CATEGORIZED_AS: 500/1000
2025-03-07 09:58:06,360 - INFO - Progrès relations CATEGORIZED_AS: 1000/1000
2025-03-07 09:58:06,360 - INFO - Création des relations CATEGORIZED_AS terminée en 0.51 secondes
2025-03-07 09:58:06,360 - INFO - Création des relations de type PRODUCED_IN
2025-03-07 09:58:06,604 - INFO - Progrès relations PRODUCED_IN: 500/1000
2025-03-07 09:58:06,702 - INFO - Progrès relations PRODUCED_IN: 1000/1000
2025-03-07 09:58:06,702 - INFO - Création des relations PRODUCED_IN terminée en 0.34 secondes
2025-03-07 09:58:06,703 - INFO - Création des relations de type CONTAINS
2025-03-07 09:58:07,052 - INFO - Progrès relations CONTAINS: 500/1000
2025-03-07 09:58:07,309 - INFO - Progrès relations CONTAINS: 1000/1000
2025-03-07 09:58:07,309 - INFO - Création des relations CONTAINS terminée en 0.61 secondes
2025-03-07 09:58:07,309 - INFO - Création des relations de type CONTAINS_ALLERGEN
2025-03-07 09:58:07,483 - INFO - Progrès relations CONTAINS_ALLERGEN: 500/1000
2025-03-07 09:58:07,610 - INFO - Progrès relations CONTAINS_ALLERGEN: 1000/1000
2025-03-07 09:58:07,611 - INFO - Création des relations CONTAINS_ALLERGEN terminée en 0.30 secondes
2025-03-07 09:58:07,611 - INFO - Création des relations de type HAS_LABEL
2025-03-07 09:58:07,846 - INFO - Progrès relations HAS_LABEL: 500/1000
2025-03-07 09:58:07,963 - INFO - Progrès relations HAS_LABEL: 1000/1000
2025-03-07 09:58:07,964 - INFO - Création des relations HAS_LABEL terminée en 0.35 secondes
2025-03-07 09:58:07,964 - INFO - Création des relations de type HAS_NUTRIENT
2025-03-07 09:58:08,336 - INFO - Progrès relations HAS_NUTRIENT: 500/1000
2025-03-07 09:58:08,584 - INFO - Progrès relations HAS_NUTRIENT: 1000/1000
2025-03-07 09:58:08,584 - INFO - Création des relations HAS_NUTRIENT terminée en 0.62 secondes
2025-03-07 09:58:08,617 - INFO - Chargement terminé en 70.57 secondes (1.18 minutes)
2025-03-07 09:58:08,617 - INFO - === Statistiques de chargement ===
2025-03-07 09:58:08,618 - INFO - marques: 1040
2025-03-07 09:58:08,618 - INFO - categories: 4363
2025-03-07 09:58:08,618 - INFO - pays: 1504
2025-03-07 09:58:08,618 - INFO - ingredients: 7177
2025-03-07 09:58:08,618 - INFO - allergenes: 970
2025-03-07 09:58:08,618 - INFO - labels: 1717
2025-03-07 09:58:08,618 - INFO - nutriments: 6472
2025-03-07 09:58:08,618 - INFO - produits_ajoutes: 1000
2025-03-07 09:58:08,935 - INFO - 1000 produits ont été chargés dans le graphe Neo4j.
2025-03-07 09:58:08,998 - INFO - Index créé: CREATE INDEX product_name_index IF NOT EXISTS FOR (p:Product) ON (p.name)
2025-03-07 09:58:09,065 - INFO - Index créé: CREATE INDEX brand_name_index IF NOT EXISTS FOR (b:Brand) ON (b.name)
2025-03-07 09:58:09,067 - INFO - Received notification from DBMS server: {severity: INFORMATION} {code: Neo.ClientNotification.Schema.IndexOrConstraintAlreadyExists} {category: SCHEMA} {title: `CREATE RANGE INDEX brand_name_index IF NOT EXISTS FOR (e:Brand) ON (e.name)` has no effect.} {description: `RANGE INDEX brand_name FOR (e:Brand) ON (e.name)` already exists.} {position: None} for query: 'CREATE INDEX brand_name_index IF NOT EXISTS FOR (b:Brand) ON (b.name)'
2025-03-07 09:58:09,130 - INFO - Index créé: CREATE INDEX category_name_index IF NOT EXISTS FOR (c:Category) ON (c.name)
2025-03-07 09:58:09,131 - INFO - Received notification from DBMS server: {severity: INFORMATION} {code: Neo.ClientNotification.Schema.IndexOrConstraintAlreadyExists} {category: SCHEMA} {title: `CREATE RANGE INDEX category_name_index IF NOT EXISTS FOR (e:Category) ON (e.name)` has no effect.} {description: `RANGE INDEX category_name FOR (e:Category) ON (e.name)` already exists.} {position: None} for query: 'CREATE INDEX category_name_index IF NOT EXISTS FOR (c:Category) ON (c.name)'
2025-03-07 09:58:09,196 - INFO - Index créé: CREATE INDEX ingredient_name_index IF NOT EXISTS FOR (i:Ingredient) ON (i.name)
2025-03-07 09:58:09,197 - INFO - Received notification from DBMS server: {severity: INFORMATION} {code: Neo.ClientNotification.Schema.IndexOrConstraintAlreadyExists} {category: SCHEMA} {title: `CREATE RANGE INDEX ingredient_name_index IF NOT EXISTS FOR (e:Ingredient) ON (e.name)` has no effect.} {description: `RANGE INDEX ingredient_name FOR (e:Ingredient) ON (e.name)` already exists.} {position: None} for query: 'CREATE INDEX ingredient_name_index IF NOT EXISTS FOR (i:Ingredient) ON (i.name)'
2025-03-07 09:58:09,264 - INFO - Index créé: CREATE INDEX product_nutriscore_index IF NOT EXISTS FOR (p:Product) ON (p.nutriscore)
2025-03-07 09:58:09,344 - INFO - Index créé: CREATE INDEX product_nova_index IF NOT EXISTS FOR (p:Product) ON (p.nova_group)
2025-03-07 09:58:09,415 - INFO - Index créé: CREATE INDEX product_ecoscore_index IF NOT EXISTS FOR (p:Product) ON (p.ecoscore)
2025-03-07 09:58:09,421 - INFO - Temps d'exécution: 72.47 secondes
